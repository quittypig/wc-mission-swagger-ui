{
   "openapi":"3.0.1",
   "info":{
      "title":"OpenAPI definition",
      "version":"v0"
   },
   "servers":[
      {
         "url":"http://localhost:3002",
         "description":"Generated server url"
      }
   ],
   "paths":{
      "/mission/{missionId}/complete":{
         "post":{
            "tags":[
               "[미션]"
            ],
            "summary":"미션 완료 / 권한: [피시방]",
            "description":"\n            - request.body.encData: 미션 신청 response.body.missionApplyId를 AES-256-CBC 암호화하여 호출 요망.(secretKey, iv는 별도로 전달 예정)\n            - response.body.isComplete: true(미션 완료), false(미션 미완료). 최초 완료시에만 보상이 획득됨.\n            - status: 403 / code: DISAVAILABLE_MISSION / message: 미션 완료 기간이 아니거나 유효하지 않은 미션입니다.\n            - status: 403 / code: UNVERIFIED_MISSION / message: 미션 검증에 실패했습니다.\n                => encData 복호화 실패 및 불일치할 경우\n        ",
            "operationId":"completeMission",
            "parameters":[
               {
                  "name":"missionId",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string",
                     "format":"uuid"
                  }
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/MissionCompleteRequest"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "403":{
                  "description":"Forbidden",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "500":{
                  "description":"Internal Server Error",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "409":{
                  "description":"Conflict",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "404":{
                  "description":"Not Found",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "401":{
                  "description":"Unauthorized",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseMissionApplyResponse"
                        }
                     }
                  }
               }
            }
         }
      },
      "/mission/{missionId}/apply":{
         "post":{
            "tags":[
               "[미션]"
            ],
            "summary":"미션 신청 / 권한: [피시방]",
            "description":"\n            - 미션 신청 가능 기간에 이미 신청한 미션을 중복 신청한 경우 status: 200, 기 생성된 missionApplyId가 내려감. \n              response.body.missionApplyId: 미션 완료 request.body.encData에 AES-256-CBC 암호화하여 호출 요망.(secretKey, iv는 별도로 전달 예정)\n            - response.body.isComplete: true(미션 완료), false(미션 미완료). 최초 완료시에만 보상이 획득됨.\n            - status: 403 / code: DISAVAILABLE_MISSION / message: 신청 기간이 아니거나 유효하지 않은 미션입니다.\n        ",
            "operationId":"applyMission",
            "parameters":[
               {
                  "name":"missionId",
                  "in":"path",
                  "required":true,
                  "schema":{
                     "type":"string",
                     "format":"uuid"
                  }
               }
            ],
            "responses":{
               "403":{
                  "description":"DISAVAILABLE_MISSION",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "500":{
                  "description":"Internal Server Error",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "409":{
                  "description":"Conflict",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "404":{
                  "description":"Not Found",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "401":{
                  "description":"Unauthorized",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseMissionApplyResponse"
                        }
                     }
                  }
               }
            }
         }
      },
      "/mission":{
         "get":{
            "tags":[
               "[미션]"
            ],
            "summary":"미션 조회 / 권한: [피시방]",
            "description":"\n            - Token이 없을 경우 pcbangId 필수\n            - Token이 있을 경우 pcbangId는 사용되지 않음\n            - response.body.content[].data: type에 따라 다르게 내려감.\n                ex: WINNING_STREAK(연승): { \"win\": 1 }\n                ex: CUMULATIVE_WIN(누적): { \"win\": 3 }\n        ",
            "operationId":"getMission",
            "parameters":[
               {
                  "name":"pcbangId",
                  "in":"query",
                  "required":false,
                  "schema":{
                     "type":"string",
                     "format":"uuid"
                  }
               },
               {
                  "name":"page",
                  "in":"query",
                  "required":false,
                  "schema":{
                     "type":"integer",
                     "format":"int32",
                     "default":0
                  }
               },
               {
                  "name":"size",
                  "in":"query",
                  "required":false,
                  "schema":{
                     "maximum":100,
                     "minimum":1,
                     "type":"integer",
                     "format":"int32",
                     "default":100
                  }
               }
            ],
            "responses":{
               "403":{
                  "description":"Forbidden",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "500":{
                  "description":"Internal Server Error",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "409":{
                  "description":"Conflict",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "404":{
                  "description":"Not Found",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "401":{
                  "description":"Unauthorized",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponseObject"
                        }
                     }
                  }
               },
               "200":{
                  "description":"OK",
                  "content":{
                     "*/*":{
                        "schema":{
                           "$ref":"#/components/schemas/ApiResponsePageMissionResponse"
                        }
                     }
                  }
               }
            }
         }
      }
   },
   "components":{
      "schemas":{
         "ApiResponseHeader":{
            "required":[
               "code",
               "isSuccess",
               "message"
            ],
            "type":"object",
            "properties":{
               "isSuccess":{
                  "type":"boolean"
               },
               "code":{
                  "type":"string",
                  "enum":[
                     "INTERNAL_ERROR",
                     "LOGIN_FAILED",
                     "NOT_FOUND",
                     "SUCCESS",
                     "BAD_REQUEST",
                     "UNAUTHORIZED",
                     "CONFLICT",
                     "ALREADY_LOGIN_USER",
                     "ALREADY_LOGOUT_USER",
                     "ALREADY_LOGIN_DEVICE",
                     "NOT_PARENT_AGREE_CUSTOMER",
                     "IDENTIFY_VERIFICATION_FAILED",
                     "RETRY_PARENT_VERIFY",
                     "INVALID_PCBANG_IP_ADDRESS",
                     "SIMPLE_PAYMENT_REGISTER_FAILED",
                     "SIMPLE_PAYMENT_APPROVAL_FAILED",
                     "SIMPLE_PAYMENT_OVERFLOW",
                     "INVALID_SIMPLE_PAYMENT",
                     "PAYMENT_CANCEL_FAILED",
                     "PAYMENT_INQUIRY_FAILED",
                     "PAYMENT_ALREADY_CANCEL",
                     "PAYMENT_ALREADY_COMPLETE",
                     "VERIFICATION_REQUEST_VERIFY_FAILED",
                     "VERIFICATION_CONFIRM_VERIFY_FAILED",
                     "VERIFICATION_CONFIRM_VERIFY_RETRY_COUNT_OVER",
                     "REGULAR_PAYMENT_INICIS_APPROVAL_FAILED",
                     "NOT_ADULT",
                     "NOT_ALLOWED_AGE_GAP",
                     "NOT_PCBANG_OWNER",
                     "ALREADY_STOP_COUPON",
                     "NOT_AVAILABLE_COUPON",
                     "ALREADY_SHARED_COUPON",
                     "ALREADY_ISSUED_COUPON",
                     "COUPON_COUNT_EMPTY",
                     "FILE_UPLOAD_FAILED",
                     "POINT_NOT_ENOUGH",
                     "DISAVAILABLE_MISSION",
                     "UNVERIFIED_MISSION"
                  ]
               },
               "message":{
                  "type":"string"
               }
            }
         },
         "ApiResponseObject":{
            "required":[
               "summary"
            ],
            "type":"object",
            "properties":{
               "summary":{
                  "$ref":"#/components/schemas/ApiResponseHeader"
               },
               "body":{
                  "type":"object"
               }
            }
         },
         "MissionCompleteRequest":{
            "required":[
               "encData"
            ],
            "type":"object",
            "properties":{
               "encData":{
                  "type":"string"
               }
            }
         },
         "ApiResponseMissionApplyResponse":{
            "required":[
               "summary"
            ],
            "type":"object",
            "properties":{
               "summary":{
                  "$ref":"#/components/schemas/ApiResponseHeader"
               },
               "body":{
                  "$ref":"#/components/schemas/MissionApplyResponse"
               }
            }
         },
         "MissionApplyResponse":{
            "required":[
               "isComplete",
               "missionApplyId"
            ],
            "type":"object",
            "properties":{
               "missionApplyId":{
                  "type":"string",
                  "format":"uuid"
               },
               "isComplete":{
                  "type":"boolean"
               }
            }
         },
         "ApiResponsePageMissionResponse":{
            "required":[
               "summary"
            ],
            "type":"object",
            "properties":{
               "summary":{
                  "$ref":"#/components/schemas/ApiResponseHeader"
               },
               "body":{
                  "$ref":"#/components/schemas/PageMissionResponse"
               }
            }
         },
         "MissionResponse":{
            "required":[
               "data",
               "expiredDateTime",
               "game",
               "missionId",
               "reward",
               "startDateTime",
               "status",
               "title",
               "type"
            ],
            "type":"object",
            "properties":{
               "missionId":{
                  "type":"string",
                  "format":"uuid"
               },
               "title":{
                  "type":"string"
               },
               "game":{
                  "type":"string"
               },
               "type":{
                  "type":"string",
                  "enum":[
                     "WINNING_STREAK",
                     "CUMULATIVE_WIN"
                  ]
               },
               "reward":{
                  "type":"string"
               },
               "status":{
                  "type":"string",
                  "enum":[
                     "AVAILABLE",
                     "ONGOING",
                     "COMPLETE",
                     "FAIL"
                  ]
               },
               "startDateTime":{
                  "type":"string",
                  "format":"date-time"
               },
               "expiredDateTime":{
                  "type":"string",
                  "format":"date-time"
               },
               "data":{
                  "type":"object",
                  "additionalProperties":{
                     "type":"object"
                  }
               }
            }
         },
         "PageMissionResponse":{
            "type":"object",
            "properties":{
               "totalPages":{
                  "type":"integer",
                  "format":"int32"
               },
               "totalElements":{
                  "type":"integer",
                  "format":"int64"
               },
               "first":{
                  "type":"boolean"
               },
               "last":{
                  "type":"boolean"
               },
               "size":{
                  "type":"integer",
                  "format":"int32"
               },
               "content":{
                  "type":"array",
                  "items":{
                     "$ref":"#/components/schemas/MissionResponse"
                  }
               },
               "number":{
                  "type":"integer",
                  "format":"int32"
               },
               "sort":{
                  "$ref":"#/components/schemas/SortObject"
               },
               "pageable":{
                  "$ref":"#/components/schemas/PageableObject"
               },
               "numberOfElements":{
                  "type":"integer",
                  "format":"int32"
               },
               "empty":{
                  "type":"boolean"
               }
            }
         },
         "PageableObject":{
            "type":"object",
            "properties":{
               "offset":{
                  "type":"integer",
                  "format":"int64"
               },
               "sort":{
                  "$ref":"#/components/schemas/SortObject"
               },
               "pageNumber":{
                  "type":"integer",
                  "format":"int32"
               },
               "pageSize":{
                  "type":"integer",
                  "format":"int32"
               },
               "paged":{
                  "type":"boolean"
               },
               "unpaged":{
                  "type":"boolean"
               }
            }
         },
         "SortObject":{
            "type":"object",
            "properties":{
               "empty":{
                  "type":"boolean"
               },
               "sorted":{
                  "type":"boolean"
               },
               "unsorted":{
                  "type":"boolean"
               }
            }
         }
      }
   }
}
